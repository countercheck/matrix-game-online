# =============================================================================
# PRODUCTION ENVIRONMENT CONFIGURATION
# =============================================================================
# Copy this file to .env.production and fill in all required values.
# NEVER commit .env.production to version control!
#
# Required variables are marked with [REQUIRED]
# Optional variables have defaults shown
# =============================================================================

# -----------------------------------------------------------------------------
# Application Settings
# -----------------------------------------------------------------------------

# [REQUIRED] Must be "production" for production deployments
NODE_ENV=production

# Port the server listens on (default: 3000)
# Most hosting platforms set this automatically
PORT=3000

# [REQUIRED] Full URL of the frontend application (no trailing slash)
# Used for CORS configuration and email links
# Examples:
#   - https://mosaicgame.com
#   - https://your-app.railway.app
APP_URL=https://your-production-domain.com

# [REQUIRED] Full URL of the backend API (no trailing slash)
# Used for generating links in emails
# Examples:
#   - https://api.mosaicgame.com
#   - https://your-api.railway.app
API_URL=https://your-api-domain.com

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------

# [REQUIRED] PostgreSQL connection string
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?schema=public
#
# Security notes:
#   - Use SSL: Add ?sslmode=require or &sslmode=require
#   - Use connection pooling for better performance
#   - Most hosting platforms provide this automatically
#
# Examples:
#   - Railway: Uses DATABASE_URL automatically
#   - Render: postgresql://user:pass@host/db?sslmode=require
#   - Supabase: postgresql://postgres:[password]@host:5432/postgres
DATABASE_URL=postgresql://user:password@host:5432/mosaic_game?schema=public&sslmode=require

# -----------------------------------------------------------------------------
# Authentication & Security
# -----------------------------------------------------------------------------

# [REQUIRED] Secret key for signing JWT tokens
# MUST be at least 32 characters of random data
# Generate with: openssl rand -base64 32
# NEVER reuse development keys in production!
JWT_SECRET=generate-a-secure-random-string-at-least-32-chars

# JWT token expiration (default: 7d)
# Format: https://github.com/vercel/ms
JWT_EXPIRY=7d

# Bcrypt hashing rounds (default: 12)
# Higher = more secure but slower. 12 is recommended for production.
BCRYPT_ROUNDS=12

# -----------------------------------------------------------------------------
# Rate Limiting
# -----------------------------------------------------------------------------

# Time window for rate limiting in milliseconds (default: 900000 = 15 minutes)
RATE_LIMIT_WINDOW_MS=900000

# Maximum requests per window (default: 100)
RATE_LIMIT_MAX_REQUESTS=100

# Auth-specific rate limit - max login/register attempts per window (default: 5)
AUTH_RATE_LIMIT_MAX=5

# -----------------------------------------------------------------------------
# Email Configuration (SendGrid recommended)
# -----------------------------------------------------------------------------

# Enable/disable email notifications (default: true)
EMAIL_ENABLED=true

# [REQUIRED] SMTP server hostname
# SendGrid: smtp.sendgrid.net
# AWS SES: email-smtp.us-east-1.amazonaws.com
# Mailgun: smtp.mailgun.org
EMAIL_HOST=smtp.sendgrid.net

# SMTP port (default: 587 for TLS, 465 for SSL)
EMAIL_PORT=587

# [REQUIRED] SMTP username
# SendGrid: Use "apikey" as the username
# AWS SES: Your SMTP credentials username
EMAIL_USER=apikey

# [REQUIRED] SMTP password/API key
# SendGrid: Your API key
# AWS SES: Your SMTP credentials password
EMAIL_PASS=your-sendgrid-api-key

# [REQUIRED] "From" email address for outgoing emails
# Must be verified with your email provider
EMAIL_FROM=noreply@your-domain.com

# -----------------------------------------------------------------------------
# Timeout Worker
# -----------------------------------------------------------------------------

# Enable/disable the timeout worker (default: true)
# Set to "false" to disable automatic phase transitions
ENABLE_TIMEOUT_WORKER=true

# How often to check for timeouts in milliseconds (default: 60000 = 1 minute)
TIMEOUT_CHECK_INTERVAL_MS=60000

# Argumentation phase timeout in hours (default: 24)
ARGUMENTATION_TIMEOUT_HOURS=24

# Voting phase timeout in hours (default: 24)
VOTING_TIMEOUT_HOURS=24

# -----------------------------------------------------------------------------
# Redis (Optional - for future caching/sessions)
# -----------------------------------------------------------------------------

# Redis connection URL (optional for v1)
# Format: redis://[:password@]host:port[/database]
# REDIS_URL=redis://default:password@host:6379

# -----------------------------------------------------------------------------
# Monitoring & Logging
# -----------------------------------------------------------------------------

# Log level (default: info)
# Options: error, warn, info, debug
LOG_LEVEL=info

# Sentry DSN for error tracking (optional but recommended)
# Get from: https://sentry.io
# SENTRY_DSN=https://xxx@xxx.ingest.sentry.io/xxx

